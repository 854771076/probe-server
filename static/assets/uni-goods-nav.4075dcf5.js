import{Y as e,o,c as l,w as t,d as a,F as n,r as s,h as u,Z as i,x as c,b as r,t as d,i as p,S as f,_ as v,$ as m,a0 as y,a as _,q as b,e as k,u as C,v as h,a1 as w,Q as g,y as x,a2 as L,a3 as N,K as F,g as T}from"./index-34a2c96b.js";import{_ as V,r as $}from"./uni-app.es.1c8f1c55.js";import{_ as G}from"./uni-icons.0e843162.js";function A(e){let o="function"==typeof e.splice?[]:{};if(e&&"object"==typeof e){for(let l in e)e[l]&&"object"==typeof e[l]?o[l]=A(e[l]):o[l]=e[l];return o}return e}function I(e){let o=e.toLowerCase();if(o&&/^#([0-9a-fA-f]{3}|[0-9a-fA-f]{6})$/.test(o)){if(4===o.length){let e="#";for(let l=1;l<4;l+=1)e+=o.slice(l,l+1).concat(o.slice(l,l+1));o=e}let e=[];for(let l=1;l<7;l+=2)e.push(parseInt(`0x${o.slice(l,l+2)}`));return e.join(",")}return o}const j=V({__name:"le-picker",props:{modelValue:{type:Array,default:[]},colNum:{type:Number,default:1},options:{type:Array,default:[]},fieldNames:{type:Object,default:()=>({label:"label",value:"value",children:"children"})}},emits:["update:modelValue"],setup(v,{emit:m}){const y=v,_=e((()=>{var e;const o=[];let l=y.options;for(let t=0;t<y.colNum;t++)if(null!=y.modelValue[t]&&l||y.modelValue[t-1]&&l||0===t&&l){o.push(b(l));const a=null==l?void 0:l.findIndex((e=>e[y.fieldNames.value]==y.modelValue[t]));l=l[a]&&(null==(e=l[a])?void 0:e[y.fieldNames.children])||[]}return o})),b=e=>e.map((e=>({label:e[y.fieldNames.label],value:e[y.fieldNames.value],children:e[y.fieldNames.children]||[]})));return(e,b)=>{const k=p,C=f;return o(),l(k,{class:"picker-view"},{default:t((()=>[(o(!0),a(n,null,s(v.colNum,((e,p)=>(o(),l(C,{key:p,style:u({width:1/v.colNum*100+"%",height:"100%",backgroundColor:0===p?"#F6F6F6":"#FFFFFF"}),"scroll-y":""},{default:t((()=>[(o(!0),a(n,null,s(i(_)[p],((e,a)=>(o(),l(k,{class:c(["picker-view-item",v.modelValue[p]==e.value&&"picker-view-item-active"]),key:a,onClick:o=>((e,o,l)=>{var t;const a=JSON.parse(JSON.stringify(y.modelValue));if(a[e]!=o.value){a[e]=o.value;let l=o[y.fieldNames.children]||[];for(let o=e+1;o<y.colNum;o++)l[0]?(a[o]=l[0][y.fieldNames.value],l=(null==(t=l[0])?void 0:t[y.fieldNames.children])||[]):a[o]&&a.splice(o,a.length)}m("update:modelValue",a)})(p,e)},{default:t((()=>[r(d(e.label),1)])),_:2},1032,["class","onClick"])))),128))])),_:2},1032,["style"])))),128))])),_:1})}}},[["__scopeId","data-v-1b1b03d9"]]),z=V({__name:"le-dropdown",props:{menuList:{type:Array,default:()=>[]},themeColor:{type:String,default:"#3185FF"},inactiveColor:{type:String,default:"#333333"},duration:{type:[Number,String],default:300},isCeiling:{type:Boolean,default:!1}},emits:["open","close","update:menuList","onConfirm","onChange"],setup(f,{emit:F}){const T=f,V=A(T.menuList),$=N(),G=e((()=>{let e={};return e.transform=`translateY(${S.value?0:"-100%"})`,e["transition-duration"]=T.duration/1e3+"s",e})),z=v(99999),P=v({zIndex:-1,opacity:0}),S=v(!1),B=v(0),E=v(null),O=v(0);m({success(e){O.value=e.windowTop}});const R=e=>{S.value=!0,P.value.zIndex=11,P.value.opacity=1,P.value.bottom="0px",P.value.top="80rpx",z.value=e,F("open",z.value)},U=()=>{S.value=!1,P.value.opacity=0,setTimeout((()=>{P.value.zIndex=-1,z.value=99999,P.value.bottom=`calc(100vh - ${B.value+O.value}px)`,P.value.top="auto"}),T.duration),F("close",z.value)},D=()=>{g().in($).selectAll(".le-dropdown-menu").boundingClientRect().exec((e=>{B.value=e[0][0].bottom}))},H=e=>{switch(99999===z.value?z.value:T.menuList[z.value].type){case"sort":case"click":case 99999:o();break;default:U(),setTimeout((()=>{o()}),T.duration)}function o(){const o=A(T.menuList);z.value=e,o[e].value=o[e].value&&"asc"==o[e].value?"desc":"asc",F("update:menuList",o),F("onConfirm",o[e])}},J=e=>{switch(99999===z.value?z.value:T.menuList[z.value].type){case"sort":case"click":case 99999:o();break;default:U(),setTimeout((()=>{o()}),T.duration)}function o(){const o=A(T.menuList);z.value=e,F("onConfirm",o[e])}},Y=(e,o)=>{U();const l=A(T.menuList);F("onConfirm",l[o])};return y((()=>{D()})),(e,v)=>{const m=x,y=p,g=L;return o(),l(y,{class:c(["le-dropdown",f.isCeiling&&"le-dropdown-ceiling"]),style:u(`--dropdownThemeColor:${f.themeColor};--dropdownThemeColorRgb:${i(I)(f.themeColor)}`)},{default:t((()=>[_(y,{class:"le-dropdown-menu"},{default:t((()=>[(o(!0),a(n,null,s(f.menuList,((e,a)=>(o(),l(y,{class:"le-dropdown-menu-item",key:a,onClick:b((e=>(e=>{switch(D(),T.menuList[e].type){case"sort":H(e);break;case"click":J(e);break;default:if(e===z.value)return void U();R(e)}})(a)),["stop"])},{default:t((()=>[_(y,{class:"le-flex"},{default:t((()=>[_(m,{class:"le-dropdown-menu-item-text",style:u({color:a===z.value?f.themeColor:f.inactiveColor})},{default:t((()=>[r(d(e.title),1)])),_:2},1032,["style"]),"sort"===e.type&&"click"!==e.type?(o(),l(y,{key:0,class:c(["le-dropdown-menu-item-arrow","asc"===e.value&&"le-dropdown-menu-item-arrow_top","desc"===e.value&&"le-dropdown-menu-item-arrow_bottom"])},null,8,["class"])):k("",!0),"sort"!==e.type&&"click"!==e.type?(o(),l(y,{key:1,class:c(["le-dropdown-menu-item-basicarrow",a===z.value&&"le-dropdown-menu-item-basicarrow_rotate"])},null,8,["class"])):k("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),_(y,{class:"le-dropdown-content",style:u([{transition:`opacity ${f.duration/1e3}s linear`,top:"auto",bottom:`calc(100vh - ${B.value+O.value}px)`,height:`calc(100vh - ${B.value+O.value}px)`},P.value]),onClick:U},{default:t((()=>[_(y,{ref_key:"leDropdownContentPopupRef",ref:E,class:"le-dropdown-content-popup",style:u([i(G)]),onClick:v[0]||(v[0]=b((()=>{}),["stop","prevent"]))},{default:t((()=>[(o(!0),a(n,null,s(f.menuList,((u,i)=>(o(),a(n,{key:i},["cell"===u.type&&i===z.value?(o(),l(y,{key:0,class:"le-dropdown-popup-content le-dropdown-cell"},{default:t((()=>[(o(!0),a(n,null,s(u.options,((e,a)=>(o(),l(y,{class:c(["le-dropdown-cell-item",u.value===e.value&&"le-dropdown-cell-active"]),key:a,onClick:o=>((e,o)=>{const l=A(T.menuList);l[o].title=e.label,l[o].value=e.value,F("update:menuList",l),U(),F("onConfirm",l[o])})(e,i)},{default:t((()=>[_(y,{class:"le-dropdown-cell-active-text"},{default:t((()=>[r(d(e.label),1)])),_:2},1024),C(_(y,{class:"le-dropdown-cell-active-icon"},null,512),[[h,u.value===e.value]])])),_:2},1032,["class","onClick"])))),128))])),_:2},1024)):k("",!0),"picker"===u.type&&i===z.value?(o(),l(y,{key:1,class:"le-dropdown-popup-content le-dropdown-picker"},{default:t((()=>[_(j,w({modelValue:u.value,"onUpdate:modelValue":e=>u.value=e},u.componentProps),null,16,["modelValue","onUpdate:modelValue"]),_(y,{class:"le-dropdown-footer"},{default:t((()=>[_(y,{class:"le-dropdown-confirm",onClick:e=>Y(0,i)},{default:t((()=>[r(d(u.confirmText||"确定"),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):k("",!0),"filter"===u.type&&i===z.value?(o(),l(y,{key:2,class:"le-dropdown-popup-content le-dropdown-filter"},{default:t((()=>[(o(!0),a(n,null,s(u.children,((u,p)=>(o(),l(y,{class:"le-dropdown-filter-item",key:p},{default:t((()=>[_(y,{class:"le-dropdown-filter-title"},{default:t((()=>[r(d(u.title)+" ",1),"slider"===u.type?(o(),l(m,{key:0,class:"le-dropdown-filter-subtitle"},{default:t((()=>[r(d(u.value)+d(u.suffix),1)])),_:2},1024)):k("",!0)])),_:2},1024),_(y,{class:"le-dropdown-filter-content"},{default:t((()=>["radio"===u.type?(o(!0),a(n,{key:0},s(u.options,((e,a)=>(o(),l(y,{class:c(["le-dropdown-filter-box",u.value===e.value&&"le-dropdown-filter-box-active"]),key:a,onClick:o=>((e,o,l)=>{const t=A(T.menuList);t[l].children[e].value=o.value,F("update:menuList",t),F("onChange",t[l],e)})(p,e,i)},{default:t((()=>[r(d(e.label),1)])),_:2},1032,["class","onClick"])))),128)):"checkbox"===u.type?(o(!0),a(n,{key:1},s(u.options,((e,a)=>(o(),l(y,{class:c(["le-dropdown-filter-box",u.value.includes(e.value)&&"le-dropdown-filter-box-active"]),key:a,onClick:o=>((e,o,l)=>{const t=A(T.menuList),a=t[l].children[e].value.indexOf(o.value);-1!=a?t[l].children[e].value.splice(a,1):t[l].children[e].value.push(o.value),F("update:menuList",t),F("onChange",t[l],e)})(p,e,i)},{default:t((()=>[r(d(e.label),1)])),_:2},1032,["class","onClick"])))),128)):"slider"===u.type?(o(),l(g,{key:2,style:{width:"100%"},activeColor:f.themeColor,value:u.value,min:u.componentProps.min||0,max:u.componentProps.max||100,step:u.componentProps.step||1,"show-value":u.componentProps["show-value"]||!0,onChange:o=>((e,o,l,t)=>{const a=A(T.menuList);a[t].children[o].value=e.detail.value,F("update:menuList",a),F("onChange",a[t],o)})(o,p,e.ssItem,i)},null,8,["activeColor","value","min","max","step","show-value","onChange"])):k("",!0)])),_:2},1024)])),_:2},1024)))),128)),_(y,{class:"le-dropdown-footer"},{default:t((()=>[_(y,{class:"le-dropdown-reset",onClick:e=>((e,o)=>{const l=A(T.menuList);l[o].children.forEach(((e,l)=>{e.value=V[o].children[l].value})),F("update:menuList",l)})(0,i)},{default:t((()=>[r("重置")])),_:2},1032,["onClick"]),_(y,{class:"le-dropdown-confirm",onClick:e=>Y(0,i)},{default:t((()=>[r(d(u.confirmText||"确定"),1)])),_:2},1032,["onClick"])])),_:2},1024)])),_:2},1024)):k("",!0)],64)))),128))])),_:1},8,["style"]),_(y,{class:"le-dropdown-content-mask",onClick:U})])),_:1},8,["style"])])),_:1},8,["class","style"])}}},[["__scopeId","data-v-6e74ec19"]]),P={en:{"uni-goods-nav.options.shop":"shop","uni-goods-nav.options.cart":"cart","uni-goods-nav.buttonGroup.addToCart":"add to cart","uni-goods-nav.buttonGroup.buyNow":"buy now"},"zh-Hans":{"uni-goods-nav.options.shop":"店铺","uni-goods-nav.options.cart":"购物车","uni-goods-nav.buttonGroup.addToCart":"加入购物车","uni-goods-nav.buttonGroup.buyNow":"立即购买"},"zh-Hant":{"uni-goods-nav.options.shop":"店鋪","uni-goods-nav.options.cart":"購物車","uni-goods-nav.buttonGroup.addToCart":"加入購物車","uni-goods-nav.buttonGroup.buyNow":"立即購買"}},{t:S}=F(P);const B=V({name:"UniGoodsNav",emits:["click","buttonClick"],props:{options:{type:Array,default:()=>[{icon:"shop",text:S("uni-goods-nav.options.shop")},{icon:"cart",text:S("uni-goods-nav.options.cart")}]},buttonGroup:{type:Array,default:()=>[{text:S("uni-goods-nav.buttonGroup.addToCart"),backgroundColor:"linear-gradient(90deg, #FFCD1E, #FF8A18)",color:"#fff"},{text:S("uni-goods-nav.buttonGroup.buyNow"),backgroundColor:"linear-gradient(90deg, #FE6035, #EF1224)",color:"#fff"}]},fill:{type:Boolean,default:!1},stat:{type:Boolean,default:!1}},methods:{onClick(e,o){this.$emit("click",{index:e,content:o})},buttonClick(e,o){uni.report&&this.stat&&uni.report(o.text,o.text),this.$emit("buttonClick",{index:e,content:o})}}},[["render",function(e,i,f,v,m,y){const b=p,C=$(T("uni-icons"),G),h=x;return o(),l(b,{class:"uni-goods-nav"},{default:t((()=>[_(b,{class:"uni-tab__seat"}),_(b,{class:"uni-tab__cart-box flex"},{default:t((()=>[_(b,{class:"flex uni-tab__cart-sub-left"},{default:t((()=>[(o(!0),a(n,null,s(f.options,((e,a)=>(o(),l(b,{key:a,class:"flex uni-tab__cart-button-left uni-tab__shop-cart",onClick:o=>y.onClick(a,e)},{default:t((()=>[_(b,{class:"uni-tab__icon"},{default:t((()=>[_(C,{type:e.icon,size:"20",color:"#646566"},null,8,["type"])])),_:2},1024),_(h,{class:"uni-tab__text"},{default:t((()=>[r(d(e.text),1)])),_:2},1024),_(b,{class:"flex uni-tab__dot-box"},{default:t((()=>[e.info?(o(),l(h,{key:0,class:c([{"uni-tab__dots":e.info>9},"uni-tab__dot"]),style:u({backgroundColor:e.infoBackgroundColor?e.infoBackgroundColor:"#ff0000",color:e.infoColor?e.infoColor:"#fff"})},{default:t((()=>[r(d(e.info),1)])),_:2},1032,["class","style"])):k("",!0)])),_:2},1024)])),_:2},1032,["onClick"])))),128))])),_:1}),_(b,{class:c([{"uni-tab__right":f.fill},"flex uni-tab__cart-sub-right"])},{default:t((()=>[(o(!0),a(n,null,s(f.buttonGroup,((e,a)=>(o(),l(b,{key:a,style:u({background:e.backgroundColor,color:e.color}),class:"flex uni-tab__cart-button-right",onClick:o=>y.buttonClick(a,e)},{default:t((()=>[_(h,{style:u({color:e.color}),class:"uni-tab__cart-button-right-text"},{default:t((()=>[r(d(e.text),1)])),_:2},1032,["style"])])),_:2},1032,["style","onClick"])))),128))])),_:1},8,["class"])])),_:1})])),_:1})}],["__scopeId","data-v-25284ced"]]);export{z as _,B as a};
