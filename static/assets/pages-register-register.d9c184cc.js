import{s as e,G as a,H as t,J as l,l as o,o as i,c as s,w as u,i as r,a as n,b as d,t as m,I as c,g as p,E as f}from"./index-34a2c96b.js";import{_ as h}from"./tui-list-cell.cf7c2bc5.js";import{_,r as g}from"./uni-app.es.1c8f1c55.js";import{_ as v}from"./tui-button.f7919236.js";import{_ as b}from"./tui-white-space.45e06eee.js";import{f as x}from"./tui-validation.c5aa0c0a.js";let D=[{name:"email",rule:["required","isEmail"],msg:["请输入邮箱","请输入正确的邮箱"]},{name:"password",rule:["required","minLength:8","maxLength:16"],msg:["请输入密码","密码为8~16位"]},{name:"checkpassword",rule:["required","isSame:password"],msg:["请输入重复密码","密码不一致"]},{name:"phone",rule:["required","isMobile"],msg:["请输入手机号","请输入正确的手机号"]},{name:"code",rule:["required","isNum","minLength:6"],msg:["请输入验证码","请输入正确的验证码"]},{name:"Inviter",rule:["isEmail"],msg:["请输入邀请者（选填）","请输入正确的邀请者邮箱"]}];const w=_({created(){},data:()=>({imgCodeUrl:"",imgCookie:"",codeTime:"获取验证码",formData:{email:"",password:"",checkpassword:"",phone:"",code:"",Inviter:""},Interval:null}),methods:{formSubmit:function(a){let t=x.validation(this.formData,D);t?(console.info(this.formData),e({title:t,icon:"none"})):this.submit()},formReset:function(e){},sendCodeCountDown:function(){"获取验证码"===this.codeTime&&(this.codeTime=60,this.Interval=setInterval((()=>{this.codeTime>0?this.codeTime--:(this.codeTime="获取验证码",clearInterval(this.Interval),this.Interval=null)}),1e3))},sendEmailCode:function(o){let i=x.validation(this.formData,[{name:"email",rule:["required","isEmail"],msg:["请输入邮箱","请输入正确的邮箱"]}]);i?e({title:i,icon:"none"}):Boolean(this.Interval)?uni.$tui.toast("频繁操作"):(a({mask:!0}),t({url:uni.$api.emailcode,method:"POST",data:{email:this.formData.email,action:"注册账号"},success:e=>{this.sendCodeCountDown(),l(),uni.$tui.toast("发送成功")},fail:e=>{console.error("Failed to fetch image data:",e),l(),uni.$tui.toast("发送失败")}}))},submit:function(){a({mask:!0}),t({url:uni.$api.signup,method:"POST",data:this.formData,success:e=>{l(),200!=e.data.code?uni.$tui.toast(e.data.error):o({delta:1,success(){uni.$tui.toast("注册成功")}})},fail:e=>{console.error("Failed to fetch image data:",e),l(),uni.$tui.toast("注册失败")}})}}},[["render",function(e,a,t,l,o,_){const x=r,D=c,w=g(p("tui-list-cell"),h),V=g(p("tui-button"),v),y=g(p("tui-white-space"),b),I=f;return i(),s(x,{class:"container"},{default:u((()=>[n(I,{onSubmit:_.formSubmit,onReset:_.formReset,id:"form"},{default:u((()=>[n(w,{hover:!1},{default:u((()=>[n(x,{class:"tui-line-cell"},{default:u((()=>[n(x,{class:"tui-title"},{default:u((()=>[d("邮箱")])),_:1}),n(D,{"placeholder-class":"tui-phcolor",class:"tui-input",name:"email",placeholder:"请输入邮箱",maxlength:"50",type:"text",modelValue:o.formData.email,"onUpdate:modelValue":a[0]||(a[0]=e=>o.formData.email=e)},null,8,["modelValue"])])),_:1})])),_:1}),n(w,{hover:!1},{default:u((()=>[n(x,{class:"tui-line-cell"},{default:u((()=>[n(x,{class:"tui-title"},{default:u((()=>[d("密码")])),_:1}),n(D,{password:"","placeholder-class":"tui-phcolor",class:"tui-input",name:"pwd",placeholder:"请输入密码",maxlength:"16",type:"text",modelValue:o.formData.password,"onUpdate:modelValue":a[1]||(a[1]=e=>o.formData.password=e)},null,8,["modelValue"])])),_:1})])),_:1}),n(w,{hover:!1},{default:u((()=>[n(x,{class:"tui-line-cell"},{default:u((()=>[n(x,{class:"tui-title"},{default:u((()=>[d("重复密码")])),_:1}),n(D,{password:"","placeholder-class":"tui-phcolor",class:"tui-input",name:"pwd2",placeholder:"请输入重复密码",maxlength:"16",type:"text",modelValue:o.formData.checkpassword,"onUpdate:modelValue":a[2]||(a[2]=e=>o.formData.checkpassword=e)},null,8,["modelValue"])])),_:1})])),_:1}),n(w,{hover:!1},{default:u((()=>[n(x,{class:"tui-line-cell"},{default:u((()=>[n(x,{class:"tui-title"},{default:u((()=>[d("手机号")])),_:1}),n(D,{"placeholder-class":"tui-phcolor",class:"tui-input",name:"phone",placeholder:"请输入手机号",maxlength:"11",type:"text",modelValue:o.formData.phone,"onUpdate:modelValue":a[3]||(a[3]=e=>o.formData.phone=e)},null,8,["modelValue"])])),_:1})])),_:1}),n(w,null,{default:u((()=>[n(x,{class:"tui-line-cell"},{default:u((()=>[n(x,{class:"tui-title"},{default:u((()=>[d("验证码")])),_:1}),n(D,{"placeholder-class":"tui-phcolor",class:"tui-input",name:"code",placeholder:"请输入验证码",maxlength:"6",type:"text",modelValue:o.formData.code,"onUpdate:modelValue":a[4]||(a[4]=e=>o.formData.code=e)},null,8,["modelValue"]),n(V,{formType:"button",width:"188rpx",height:"64rpx",background:"#f2f2f2",color:"#5677fc",size:"24",bold:"",radius:"20rpx",onClick:_.sendEmailCode},{default:u((()=>[d(m(o.codeTime),1)])),_:1},8,["onClick"])])),_:1})])),_:1}),n(w,{hover:!1},{default:u((()=>[n(x,{class:"tui-line-cell"},{default:u((()=>[n(x,{class:"tui-title"},{default:u((()=>[d("邀请者")])),_:1}),n(D,{"placeholder-class":"tui-phcolor",class:"tui-input",name:"Inviter",placeholder:"请输入邀请者邮箱",maxlength:"50",type:"text",modelValue:o.formData.Inviter,"onUpdate:modelValue":a[5]||(a[5]=e=>o.formData.Inviter=e)},null,8,["modelValue"])])),_:1})])),_:1}),n(y,{size:"large"}),n(x,{class:"tui-btn-box"},{default:u((()=>[n(V,{class:"tui-button-primary","hover-class":"tui-button-gray_hover",formType:"submit",type:"green",shape:"circle"},{default:u((()=>[d("注册")])),_:1}),n(y,{size:"large"}),n(V,{class:"tui-button-primary tui-button-gray","hover-class":"tui-button-hover",formType:"reset",shape:"circle",type:"gray"},{default:u((()=>[d("重置")])),_:1})])),_:1})])),_:1},8,["onSubmit","onReset"])])),_:1})}],["__scopeId","data-v-6098daa1"]]);export{w as default};
