import{o as t,c as e,w as a,A as s,x as i,h as l,i as o,B as n,s as r,C as c,a as u,e as f,b as g,t as d,g as p,f as m,y as h}from"./index-34a2c96b.js";import{_}from"./uni-icons.0e843162.js";import{_ as y,r as k}from"./uni-app.es.1c8f1c55.js";const w=y({name:"tuiBadge",emits:["click"],props:{type:{type:String,default:"primary"},dot:{type:Boolean,default:!1},margin:{type:String,default:"0"},absolute:{type:Boolean,default:!1},top:{type:String,default:"-8rpx"},right:{type:String,default:"0"},scaleRatio:{type:Number,default:1},translateX:{type:String,default:"0"}},computed:{getStyle(){return`scale(${this.scaleRatio}) translateX(${this.translateX})`},getBackground(){const t=uni&&uni.$tui&&uni.$tui.color;return{primary:t&&t.primary||"#5677fc",green:t&&t.success||"#07c160",warning:t&&t.warning||"#ff7900",danger:t&&t.danger||"#EB0909",white:"#fff",black:"#000",gray:"#ededed",red:t&&t.pink||"#f74d54",pink:t&&t.pink||"#f74d54",white_red:"#fff",white_primary:"#fff",white_green:"#fff",white_warning:"#fff",white_pink:"#fff"}[this.type]},getColor(){const t=uni&&uni.$tui&&uni.$tui.color;return{primary:"#fff",green:"#fff",warning:"#fff",danger:"#fff",white:"#333",black:"#fff",gray:"#999",red:"#fff",pink:t&&t.pink||"#f74d54",white_red:t&&t.danger||"#EB0909",white_primary:t&&t.primary||"#5677fc",white_green:t&&t.success||"#07c160",white_warning:t&&t.warning||"#ff7900",white_pink:t&&t.pink||"#f74d54"}[this.type]}},methods:{handleClick(){this.$emit("click",{})}}},[["render",function(n,r,c,u,f,g){const d=o;return t(),e(d,{class:i([c.dot?"tui-badge-dot":"tui-badge",c.dot?"":"tui-badge-scale"]),style:l({top:c.top,right:c.right,position:c.absolute?"absolute":"static",transform:g.getStyle,margin:c.margin,background:g.getBackground,color:g.getColor}),onClick:g.handleClick},{default:a((()=>[s(n.$slots,"default",{},void 0,!0)])),_:3},8,["class","style","onClick"])}],["__scopeId","data-v-74e0bf28"]]);const b=y({data:()=>({serverUrl:uni.$api.uploadphoto}),computed:{...n(["auth/getUserInfo","auth/getLoginStatus"]),userInfo(){return this["auth/getUserInfo"]},login(){return this["auth/getLoginStatus"]},vipTime(){if(this["auth/getUserInfo"].vipTime){let t=new Date(this["auth/getUserInfo"].vipTime),e=new Date;return t.getTime()-e.getTime()<0?"已到期":uni.$tui.getDateTimeString(t)}return"-"},getHeader(){return uni.$apiServer+(this["auth/getUserInfo"].photo?this["auth/getUserInfo"].photo:"/media/default/user.jpg")}},async onPullDownRefresh(){await this.$store.dispatch("auth/setUserInfo"),r({title:"刷新成功",icon:"success"}),c()},onShow(){this.$store.dispatch("auth/setUserInfo")},methods:{goLogin(){this.login||uni.$tui.href("/pages/login/login")},goPage(t){uni.$tui.href(`/pages/${t}/${t}`)}}},[["render",function(s,i,l,n,r,c){const y=k(p("uni-icons"),_),b=k(p("tui-badge"),w),v=o,I=m,C=h;return t(),e(v,{class:"center",style:{"padding-top":"50px",height:"100vh"}},{default:a((()=>[u(v,{id:"calendar"},{default:a((()=>[u(y,{type:"calendar",size:"30",color:"skyblue",onClick:i[0]||(i[0]=t=>c.login?c.goPage("checkin"):c.goLogin())}),c.userInfo.checkin?f("",!0):(t(),e(b,{key:0,type:"primary",scaleRatio:.5,absolute:"",translateX:"40%",top:"-6rpx"},null,8,["scaleRatio"]))])),_:1}),u(v,{class:"bg center"},{default:a((()=>[u(v,{class:"bg-radius"}),u(v,{class:"logo",onClick:c.goLogin,"hover-class":c.login?"":"logo-hover"},{default:a((()=>[u(v,{class:"tui-badge-item"},{default:a((()=>[u(I,{class:"logo-img",src:c.getHeader},null,8,["src"]),u(b,{type:c.userInfo.vip>0&&c.userInfo.isvip?"danger":"gray",scaleRatio:.8,absolute:"",translateX:"40%",top:"-6rpx"},{default:a((()=>[u(y,{type:"vip",color:c.userInfo.vip>0&&c.userInfo.isvip?"yellow":"grey"},null,8,["color"]),g("Vip"+d(c.userInfo.vip),1)])),_:1},8,["type","scaleRatio"])])),_:1}),u(v,{class:"logo-title"},{default:a((()=>[u(C,{class:"uer-name"},{default:a((()=>[g(d(c.userInfo.email),1)])),_:1}),u(v,{class:"vipTime"},{default:a((()=>[g("到期时间："+d(c.vipTime),1)])),_:1})])),_:1}),u(v,{class:"count"},{default:a((()=>[u(v,{class:"count-item",onClick:i[1]||(i[1]=t=>c.login?c.goPage("stars"):c.goLogin())},{default:a((()=>[u(C,{class:"count-item-num"},{default:a((()=>[g(d(c.userInfo.stars),1)])),_:1}),u(C,{class:"count-item-text"},{default:a((()=>[g("我的收藏")])),_:1})])),_:1}),u(v,{class:"count-item",onClick:i[2]||(i[2]=t=>c.login?c.goPage("history"):c.goLogin())},{default:a((()=>[u(C,{class:"count-item-num"},{default:a((()=>[g(d(c.userInfo.historys),1)])),_:1}),u(C,{class:"count-item-text"},{default:a((()=>[g("我的足迹")])),_:1})])),_:1}),u(v,{class:"count-item",onClick:i[3]||(i[3]=t=>c.login?c.goPage("comments"):c.goLogin())},{default:a((()=>[u(C,{class:"count-item-num"},{default:a((()=>[g(d(c.userInfo.comments),1)])),_:1}),u(C,{class:"count-item-text"},{default:a((()=>[g("我的评论")])),_:1})])),_:1}),u(v,{class:"count-item",onClick:i[4]||(i[4]=t=>c.login?c.goPage("points"):c.goLogin())},{default:a((()=>[u(C,{class:"count-item-num"},{default:a((()=>[g(d(c.userInfo.points),1)])),_:1}),u(C,{class:"count-item-text"},{default:a((()=>[g("我的积分")])),_:1})])),_:1})])),_:1})])),_:1},8,["onClick","hover-class"])])),_:1}),u(v,{class:"bg-gray center"},{default:a((()=>[u(v,{class:"center-list"},{default:a((()=>[u(v,{class:"center-list-item border-bottom"},{default:a((()=>[u(y,{type:"shop-filled",class:"list-icon",color:"#ffaa00"}),u(C,{class:"list-text",onClick:i[5]||(i[5]=t=>c.login?c.goPage("mygoods"):c.goLogin())},{default:a((()=>[g("我的饰品")])),_:1}),u(C,{class:"navigat-arrow"},{default:a((()=>[g("")])),_:1})])),_:1}),u(v,{class:"center-list-item border-bottom"},{default:a((()=>[u(y,{type:"personadd",class:"list-icon",color:"#00aaff"}),u(C,{class:"list-text",onClick:i[6]||(i[6]=t=>c.login?c.goPage("invite"):c.goLogin())},{default:a((()=>[g("邀请朋友")])),_:1}),u(C,{class:"navigat-arrow"},{default:a((()=>[g("")])),_:1})])),_:1}),u(v,{class:"center-list-item border-bottom"},{default:a((()=>[u(y,{type:"list",class:"list-icon",color:"#ffaa00"}),u(C,{class:"list-text"},{default:a((()=>[g("积分任务")])),_:1}),u(C,{class:"navigat-arrow"},{default:a((()=>[g("")])),_:1})])),_:1})])),_:1}),u(v,{class:"center-list"},{default:a((()=>[u(v,{class:"center-list-item border-bottom"},{default:a((()=>[u(y,{type:"help",class:"list-icon",color:"#007aff"}),u(C,{class:"list-text",onClick:i[7]||(i[7]=t=>c.login?c.goPage("feedback"):c.goLogin())},{default:a((()=>[g("帮助与反馈")])),_:1}),u(C,{class:"navigat-arrow"},{default:a((()=>[g("")])),_:1})])),_:1}),u(v,{class:"center-list-item"},{default:a((()=>[u(y,{type:"help",class:"list-icon",color:"#dd524d"}),u(C,{class:"list-text",onClick:i[8]||(i[8]=t=>c.goPage("license"))},{default:a((()=>[g("服务条款及隐私")])),_:1}),u(C,{class:"navigat-arrow"},{default:a((()=>[g("")])),_:1})])),_:1})])),_:1}),u(v,{class:"center-list"},{default:a((()=>[u(v,{class:"center-list-item"},{default:a((()=>[u(y,{type:"info",class:"list-icon"}),u(C,{class:"list-text",onClick:i[9]||(i[9]=t=>c.goPage("pointinfo"))},{default:a((()=>[g("关于积分")])),_:1}),u(C,{class:"navigat-arrow"},{default:a((()=>[g("")])),_:1})])),_:1}),u(v,{class:"center-list-item"},{default:a((()=>[u(y,{type:"gear",class:"list-icon",color:"#4cd964"}),u(C,{class:"list-text",onClick:i[10]||(i[10]=t=>c.goPage("settings"))},{default:a((()=>[g("设置")])),_:1}),u(C,{class:"navigat-arrow"},{default:a((()=>[g("")])),_:1})])),_:1})])),_:1})])),_:1})])),_:1})}],["__scopeId","data-v-d6f9308c"]]);export{b as default};
