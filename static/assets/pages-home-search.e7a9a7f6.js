import{j as a,k as s,n as t,l as e,m as l,p as c,o as i,c as r,w as o,i as u,a as h,q as n,u as d,v as f,d as _,r as y,F as z,b as p,I as k,g as m}from"./index-34a2c96b.js";import{_ as T}from"./tui-list-cell.cf7c2bc5.js";import{_ as x,r as v}from"./uni-app.es.1c8f1c55.js";import{_ as C}from"./uni-icons.0e843162.js";const S=x({data:()=>({btnTxt:"取消",Txt:"",hot:["AK","蝴蝶刀"],history:a("search_history")||[],fuzzy_search:!1,fuzzy_search_list:[]}),watch:{Txt(a){this.btnTxt=""==a?"取消":"搜索"}},onLoad(){},methods:{fuzzySearch_focus(){this.fuzzy_search=!0},fuzzySearch_blur(){this.fuzzy_search=!1},fuzzySearch_change(a){a.detail.value.length>=2&&uni.$api.associatedWords(a.detail.value,(a=>{console.log(a),this.fuzzy_search_list=a.data}),(a=>{console.error(a)}))},fuzzySearch_click(a){let t=a.currentTarget.dataset.value;t=a.currentTarget.dataset.value,this.history.includes(t)||this.history.push(t),s("search_history",this.history),this.search(t)},search(a){t({url:"/pages/home/filter?keywords="+a})},cancel(){"取消"==this.btnTxt?e({delta:1}):(this.history.includes(this.Txt)||this.history.push(this.Txt),s("search_history",this.history),this.search(this.Txt))},clearHistory(){l({title:"删除记录",content:"确认删除记录吗?",success:a=>{a.confirm&&(this.history=[],c("search_history"))}})}}},[["render",function(a,s,t,e,l,c){const x=k,S=u,b=v(m("tui-list-cell"),T),g=v(m("uni-icons"),C);return i(),r(S,{class:"searchBg",onClickPassive:c.fuzzySearch_blur},{default:o((()=>[h(S,{class:"search"},{default:o((()=>[h(S,{class:"searchTxt-box"},{default:o((()=>[h(x,{style:{"margin-top":"4px"},type:"text",placeholder:"请输入搜索的饰品名称",modelValue:l.Txt,"onUpdate:modelValue":s[0]||(s[0]=a=>l.Txt=a),class:"searchTxt",onFocus:c.fuzzySearch_focus,onInput:c.fuzzySearch_change,onClick:n((a=>!0),["stop"])},null,8,["modelValue","onFocus","onInput","onClick"])])),_:1}),h(x,{type:"button",class:"searchBtn",modelValue:l.btnTxt,"onUpdate:modelValue":s[1]||(s[1]=a=>l.btnTxt=a),onClick:c.cancel},null,8,["modelValue","onClick"])])),_:1}),d(h(S,{class:"fuzzySearch"},{default:o((()=>[(i(!0),_(z,null,y(l.fuzzy_search_list,((a,s)=>(i(),r(S,{key:s},{default:o((()=>[h(b,{hover:!1},{default:o((()=>[h(S,{"data-value":a.value,onClick:c.fuzzySearch_click,innerHTML:a.name},null,8,["data-value","onClick","innerHTML"])])),_:2},1024)])),_:2},1024)))),128))])),_:1},512),[[f,l.fuzzy_search]]),h(S,{class:"hot-search"},{default:o((()=>[h(S,{class:"search-title"},{default:o((()=>[p(" 热门搜索 ")])),_:1}),h(S,{class:"hot-list"},{default:o((()=>[(i(!0),_(z,null,y(l.hot,((a,s)=>(i(),r(S,{class:"hot-item",key:s},{default:o((()=>[h(S,{"data-value":a,onClick:c.fuzzySearch_click,innerHTML:a},null,8,["data-value","onClick","innerHTML"])])),_:2},1024)))),128))])),_:1})])),_:1}),h(S,{class:"history-search"},{default:o((()=>[h(S,{class:"search-title"},{default:o((()=>[h(S,null,{default:o((()=>[p("历史搜索")])),_:1}),h(S,null,{default:o((()=>[h(g,{type:"trash",size:"30rpx",onClick:c.clearHistory},null,8,["onClick"])])),_:1})])),_:1}),h(S,{class:"history-list"},{default:o((()=>[(i(!0),_(z,null,y(l.history,((a,s)=>(i(),r(S,{class:"hot-item",key:s},{default:o((()=>[h(S,{"data-value":a,onClick:c.fuzzySearch_click,innerHTML:a},null,8,["data-value","onClick","innerHTML"])])),_:2},1024)))),128))])),_:1})])),_:1})])),_:1},8,["onClickPassive"])}],["__scopeId","data-v-fc2151fc"]]);export{S as default};
