import{s as e,o as t,c as a,w as o,i,a as l,b as s,D as r,I as u,g as n,E as c}from"./index-34a2c96b.js";import{_ as d}from"./tui-list-cell.cf7c2bc5.js";import{_ as m,r as f}from"./uni-app.es.1c8f1c55.js";import{_ as h}from"./tui-white-space.45e06eee.js";import{_ as p}from"./tui-button.f7919236.js";import{f as g}from"./tui-validation.c5aa0c0a.js";let _=[{name:"account",rule:["required","isMobileOrEmail"],msg:["请输入账号","请输入正确的账号"]},{name:"pwd",rule:["required","minLength:8","maxLength:16"],msg:["请输入密码","密码为8~16位"]},{name:"code",rule:["required","minLength:4","maxLength:4"],msg:["请输入验证码","请输入正确的验证码"]}];const x=m({created(){this.resetCode()},data:()=>({imgCodeUrl:"",imgCookie:"",formData:{account:"",pwd:"",code:""}}),methods:{formSubmit:function(t){let a=g.validation(this.formData,_);a?e({title:a,icon:"none"}):this.submit(this.formData)},formReset:function(e){this.resetCode()},resetCode:function(e){this.imgCodeUrl=uni.$api.imgcode+"?"+Math.random()},submit:function(e){this.$store.dispatch("auth/login",{data:e,success:e=>{uni.$tui.href("/pages/home/home",!0)},fail:e=>{this.resetCode()},cookie:this.imgCookie})},switchRegister:function(e){uni.$tui.href("/pages/register/register")},switchForget:function(e){uni.$tui.href("/pages/foreget/foreget")}}},[["render",function(e,m,g,_,x,b){const C=i,w=u,y=f(n("tui-list-cell"),d),D=f(n("tui-white-space"),h),v=f(n("tui-button"),p),V=c;return t(),a(C,{class:"container"},{default:o((()=>[l(V,{onSubmit:b.formSubmit,onReset:b.formReset},{default:o((()=>[l(y,{hover:!1},{default:o((()=>[l(C,{class:"tui-line-cell"},{default:o((()=>[l(C,{class:"tui-title"},{default:o((()=>[s("账号")])),_:1}),l(w,{"placeholder-class":"tui-phcolor",class:"tui-input",name:"account",placeholder:"请输入手机号或邮箱",maxlength:"50",type:"text",modelValue:x.formData.account,"onUpdate:modelValue":m[0]||(m[0]=e=>x.formData.account=e)},null,8,["modelValue"])])),_:1})])),_:1}),l(y,{hover:!1},{default:o((()=>[l(C,{class:"tui-line-cell"},{default:o((()=>[l(C,{class:"tui-title"},{default:o((()=>[s("密码")])),_:1}),l(w,{password:"","placeholder-class":"tui-phcolor",class:"tui-input",name:"pwd",placeholder:"请输入密码",maxlength:"16",type:"text",modelValue:x.formData.pwd,"onUpdate:modelValue":m[1]||(m[1]=e=>x.formData.pwd=e)},null,8,["modelValue"])])),_:1})])),_:1}),l(y,null,{default:o((()=>[l(C,{class:"tui-line-cell"},{default:o((()=>[l(C,{class:"tui-title"},{default:o((()=>[s("验证码")])),_:1}),l(w,{"placeholder-class":"tui-phcolor",class:"tui-input",name:"code",placeholder:"请输入验证码",maxlength:"4",type:"text",modelValue:x.formData.code,"onUpdate:modelValue":m[2]||(m[2]=e=>x.formData.code=e)},null,8,["modelValue"]),l(C,{style:{height:"64rpx",width:"200rpx"}},{default:o((()=>[r("img",{src:x.imgCodeUrl,alt:"xxxx",onClick:m[3]||(m[3]=(...e)=>b.resetCode&&b.resetCode(...e)),style:{height:"64rpx",width:"200rpx"}},null,8,["src"])])),_:1})])),_:1})])),_:1}),l(C,{class:"forget"},{default:o((()=>[l(C,{onClick:b.switchRegister},{default:o((()=>[s("注册账号")])),_:1},8,["onClick"]),l(C,{onClick:b.switchForget},{default:o((()=>[s("忘记密码?")])),_:1},8,["onClick"])])),_:1}),l(D,{size:"large"}),l(C,{class:"tui-btn-box"},{default:o((()=>[l(v,{class:"tui-button-primary","hover-class":"tui-button-gray_hover",formType:"submit",type:"green",shape:"circle"},{default:o((()=>[s("登录")])),_:1}),l(D,{size:"large"}),l(v,{class:"tui-button-primary tui-button-gray","hover-class":"tui-button-hover",formType:"reset",shape:"circle",type:"gray"},{default:o((()=>[s("重置")])),_:1})])),_:1})])),_:1},8,["onSubmit","onReset"])])),_:1})}],["__scopeId","data-v-308f60d7"]]);export{x as default};
